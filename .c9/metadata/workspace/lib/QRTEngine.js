{"filter":false,"title":"QRTEngine.js","tooltip":"/lib/QRTEngine.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":515,"column":81},"end":{"row":515,"column":82}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":515,"column":82},"end":{"row":515,"column":83}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":515,"column":83},"end":{"row":515,"column":84}},"text":"'"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":515,"column":84},"end":{"row":515,"column":85}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":515,"column":85},"end":{"row":515,"column":86}},"text":"|"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":515,"column":86},"end":{"row":515,"column":87}},"text":"|"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":511,"column":24},"end":{"row":511,"column":27}},"text":"bla"},{"action":"insertText","range":{"start":{"row":511,"column":24},"end":{"row":511,"column":25}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":511,"column":25},"end":{"row":511,"column":26}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":515,"column":110},"end":{"row":516,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":516,"column":0},"end":{"row":516,"column":25}},"text":"                         "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":516,"column":25},"end":{"row":517,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":517,"column":0},"end":{"row":517,"column":25}},"text":"                         "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":25},"end":{"row":517,"column":26}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":26},"end":{"row":517,"column":27}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":27},"end":{"row":517,"column":28}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":28},"end":{"row":517,"column":29}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":29},"end":{"row":517,"column":30}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":30},"end":{"row":517,"column":31}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":31},"end":{"row":517,"column":32}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":32},"end":{"row":517,"column":33}},"text":"S"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":33},"end":{"row":517,"column":34}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":34},"end":{"row":517,"column":35}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":35},"end":{"row":517,"column":36}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":36},"end":{"row":517,"column":37}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":37},"end":{"row":517,"column":39}},"text":"[]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":38},"end":{"row":517,"column":39}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":39},"end":{"row":517,"column":40}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":40},"end":{"row":517,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":40},"end":{"row":517,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":40},"end":{"row":517,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":41},"end":{"row":517,"column":42}},"text":"+"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":42},"end":{"row":517,"column":43}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":43},"end":{"row":517,"column":45}},"text":"''"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":44},"end":{"row":517,"column":45}},"text":"["}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":46},"end":{"row":517,"column":47}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":47},"end":{"row":517,"column":48}},"text":"+"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":48},"end":{"row":517,"column":49}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":49},"end":{"row":517,"column":50}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":50},"end":{"row":517,"column":51}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":51},"end":{"row":517,"column":52}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":52},"end":{"row":517,"column":53}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":52},"end":{"row":517,"column":53}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":52},"end":{"row":517,"column":53}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":53},"end":{"row":517,"column":54}},"text":"+"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":54},"end":{"row":517,"column":55}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":55},"end":{"row":517,"column":57}},"text":"''"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":56},"end":{"row":517,"column":57}},"text":"]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":58},"end":{"row":517,"column":59}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":58},"end":{"row":517,"column":59}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":59},"end":{"row":517,"column":60}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":59},"end":{"row":517,"column":60}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":58},"end":{"row":517,"column":59}},"text":"]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":58},"end":{"row":517,"column":59}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":58},"end":{"row":517,"column":59}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":58},"end":{"row":517,"column":59}},"text":"]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":59},"end":{"row":517,"column":60}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":59},"end":{"row":517,"column":60}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":59},"end":{"row":517,"column":60}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":60},"end":{"row":517,"column":61}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":61},"end":{"row":517,"column":62}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":62},"end":{"row":517,"column":63}},"text":"Q"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":63},"end":{"row":517,"column":64}},"text":"R"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":64},"end":{"row":517,"column":65}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":65},"end":{"row":517,"column":66}},"text":"E"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":66},"end":{"row":517,"column":67}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":67},"end":{"row":517,"column":68}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":68},"end":{"row":517,"column":69}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":69},"end":{"row":517,"column":70}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":70},"end":{"row":517,"column":71}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":71},"end":{"row":517,"column":72}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":71},"end":{"row":517,"column":72}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":70},"end":{"row":517,"column":71}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":69},"end":{"row":517,"column":70}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":68},"end":{"row":517,"column":69}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":67},"end":{"row":517,"column":68}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":67},"end":{"row":517,"column":68}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":68},"end":{"row":517,"column":69}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":69},"end":{"row":517,"column":70}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":70},"end":{"row":517,"column":71}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":71},"end":{"row":517,"column":72}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":72},"end":{"row":517,"column":73}},"text":"B"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":73},"end":{"row":517,"column":74}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":74},"end":{"row":517,"column":75}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":75},"end":{"row":517,"column":76}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":76},"end":{"row":517,"column":77}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":77},"end":{"row":517,"column":78}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":517,"column":77},"end":{"row":517,"column":78}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":77},"end":{"row":517,"column":79}},"text":"[]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":78},"end":{"row":517,"column":79}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":79},"end":{"row":517,"column":80}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":80},"end":{"row":517,"column":81}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":517,"column":82},"end":{"row":517,"column":83}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":518,"column":0},"end":{"row":518,"column":25}},"text":"                         "},{"action":"removeText","range":{"start":{"row":517,"column":83},"end":{"row":518,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":518,"column":0},"end":{"row":518,"column":29}},"text":"                             "},{"action":"removeText","range":{"start":{"row":517,"column":83},"end":{"row":518,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":518,"column":0},"end":{"row":518,"column":25}},"text":"                         "},{"action":"removeText","range":{"start":{"row":517,"column":83},"end":{"row":518,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":72,"column":0},"end":{"row":72,"column":8}},"text":"        "},{"action":"removeLines","range":{"start":{"row":39,"column":0},"end":{"row":72,"column":0}},"nl":"\n","lines":["        /**","         * questionQueue contains Objects (stimuli) that are waiting to be presented","         * @private","         * @property questionQueue","         * @type Array","         */","        questionQueue: [],","","        /**","         * currentPageQuestions contains the Question Objects that are","         * displayed at any given time.","         * @private","         * @property currentPageQuestions","         * @type Array","         */","        currentPageQuestions: [],","","        /**","         * Contains Trial Data Columns that were 'newly' added in this trial run.","         * @private","         * @property newlyAddedColumns","         * @type Array","         */","        newlyAddedColumns: [],","","        /**","         * Contains the Post-Initialization Element. ","         * @private","         * @property postInitElement","         * @type Object","         */","        postInitElement: {},",""]},{"action":"removeText","range":{"start":{"row":38,"column":8},"end":{"row":39,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":38,"column":8},"end":{"row":38,"column":11}},"text":"/**"},{"action":"insertText","range":{"start":{"row":38,"column":11},"end":{"row":39,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":39,"column":0},"end":{"row":196,"column":0}},"lines":["         * TDCache contains the Trial-Level Data in an Object. DO NOT directly manipulate this Object. It might cause inconsistencies in the data file and cause unexpected once parsed.","         * Use QRTE.setTrialData and QRTE.getTrialData instead.","         * ","         * @property TDCache","         * @private","         * @type Object","         */","        TDCache: {},","","        /**","         * ColumnCache contains all the mappings from QID to Columns","         * @property columnCache","         * @private","         * @type Object","         */","        columnCache: {},","","        /**","         * BDCache contains the BlockLevel Data in an Object. Directly manipulating this Object might cause inconsistencies","         * @property BDCache","         * @private","         * @type Object","         */","        BDCache: {},","","        /**","         * SDCache is a cache for speeding up retrieval of Survey level Data,","         * All Survey data is saved to both Embedded Data and Survey Data","         * @private","         * @property SDCache","         * @type Object","         */","        SDCache: {},","","        /**","         * idCache is a cache for quickly retrieving the Qualtrics QID to QRTLib Id mappings.","         * Saved in the idData embedded data field after every trial.","         * @private","         * @property idCache","         * @type Object","         */","        idCache: {},","","        /**","         * questionQueue contains Objects (stimuli) that are waiting to be presented","         * @private","         * @property questionQueue","         * @type Array","         */","        questionQueue: [],","","        /**","         * currentPageQuestions contains the Question Objects that are","         * displayed at any given time.","         * @private","         * @property currentPageQuestions","         * @type Array","         */","        currentPageQuestions: [],","","        /**","         * Contains Trial Data Columns that were 'newly' added in this trial run.","         * @private","         * @property newlyAddedColumns","         * @type Array","         */","        newlyAddedColumns: [],","","        /**","         * Contains the Post-Initialization Element. ","         * @private","         * @property postInitElement","         * @type Object","         */","        postInitElement: {},","","        /**","         * Setter function for Trial-Level Data. ","         * @method setTrialData","         * @param key {String} Key","         * @param value {Value} Value","         */","        setTrialData: function(key, value) {","            this.TDCache[key] = value;","            if (this.BDCache.QRTLib_trialColumns[key] === undefined) {","                this.BDCache.QRTLib_trialColumns[key] = '';","                this.newlyAddedColumns.push(key);","            }","        },","","        /**","         * Gets the value of Trial-Level Data field 'key","         * @method getTrialData","         * @param key {String} Key","         */","        getTrialData: function(key) {","            return this.TDCache[key];","        },","","        /**","         * Setter function for Block-Level Data. ","         * @method setBlockData","         * @param key {String} Key","         * @param value {Value} Value","         */","        setBlockData: function(key, value) {","            this.BDCache[key] = value;","        },","","","        /**","         * Gets the value of Block-Level Data field 'key ","         * @method getBlockData","         * @param key {String} Key","         */","        getBlockData: function(key) {","            return this.BDCache[key];","        },","","","","","        /**","         * Stringify the Block Data and store it in the Embedded Data Field. This preserves the values stored on Block Level for use in later trials","         * @method saveBlockData","         * @param key {String} Key","         */","        saveBlockData: function() {","            Qualtrics.SurveyEngine.setEmbeddedData(QRTE.blockDataField, Object.toJSON(QRTE.BDCache));","        },","","","","        /**","         * Setter function for Survey-Level Data (Embedded Data). ","         * @method setSurveyData","         * @param key {String} Key","         * @param value {Value} Value","         */","        setSurveyData: function(key, value) {","            this.SDCache[key] = value;","            Qualtrics.SurveyEngine.setEmbeddedData(key, value);","        },","","","","        /**","         * Gets the value of Survey-Level Data (Embedded Data) 'key'","         * @method getSurveyData","         * @param key {String} Key","         */","","        getSurveyData: function(key) {","            if (this.SDCache[key] !== undefined) {","                return this.SDCache[key];","            }","            return Qualtrics.SurveyEngine.getEmbeddedData(key);"]},{"action":"insertText","range":{"start":{"row":196,"column":0},"end":{"row":196,"column":10}},"text":"        },"},{"action":"removeText","range":{"start":{"row":318,"column":0},"end":{"row":318,"column":35}},"text":"            QRTE.initData(blockId);"},{"action":"removeText","range":{"start":{"row":317,"column":54},"end":{"row":318,"column":0}},"text":"\n"},{"action":"removeText","range":{"start":{"row":605,"column":24},"end":{"row":605,"column":33}},"text":"dataStore"},{"action":"insertText","range":{"start":{"row":605,"column":24},"end":{"row":605,"column":30}},"text":"tempTD"},{"action":"removeText","range":{"start":{"row":610,"column":0},"end":{"row":610,"column":20}},"text":"                    "},{"action":"removeLines","range":{"start":{"row":608,"column":0},"end":{"row":610,"column":0}},"nl":"\n","lines":["                        tryDataStore = {};","                    "]},{"action":"removeText","range":{"start":{"row":607,"column":25},"end":{"row":607,"column":26}},"text":","},{"action":"removeText","range":{"start":{"row":607,"column":25},"end":{"row":608,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":607,"column":25},"end":{"row":607,"column":26}},"text":";"},{"action":"removeText","range":{"start":{"row":621,"column":0},"end":{"row":621,"column":20}},"text":"                    "},{"action":"removeText","range":{"start":{"row":641,"column":0},"end":{"row":641,"column":43}},"text":"                        if (QRTE.Data.Trial"},{"action":"removeLines","range":{"start":{"row":623,"column":0},"end":{"row":641,"column":0}},"nl":"\n","lines":["                         if (!(QRTE.Data.Trial.hasOwnProperty(id) && id !== '')) continue;","                         for(key in QRTE.Data.Trial[id]) {","                             if (!(QRTE.Data.Trial[id].hasOwnProperty(key) && key !== '')) continue;","                             ","                             //Set trial data in dataStore","                             tryDataStore[id + '[' + key + ']'] = QRTE.Data.Trial[id][key];","                         }","                    }","                    var id = QRTE.Data.Block.id;","                    for (key in QRTE.Data.Block) {","                         if (!(QRTE.Data.Block.hasOwnProperty(key) && key !== '')) continue;","                         //Check if Block is not a magic property, either current, previous or a nr (for trial)","                         if (key === 'current' || key === 'previous' || key === 'id' || !isNaN(key)) continue;","                         ","                         tryDataStore[id + '[' + key + ']'] = QRTE.Data.Block[key];","                    }","","                    for (key in QRTE.Data.Trial) {"]},{"action":"removeText","range":{"start":{"row":622,"column":25},"end":{"row":622,"column":49}},"text":"id in QRTE.Data.Trial) {"},{"action":"removeText","range":{"start":{"row":622,"column":25},"end":{"row":623,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":622,"column":25},"end":{"row":622,"column":47}},"text":"key in QRTE.TDCache) {"},{"action":"insertText","range":{"start":{"row":622,"column":47},"end":{"row":623,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":623,"column":0},"end":{"row":623,"column":40}},"text":"                        if (QRTE.TDCache"},{"action":"removeText","range":{"start":{"row":625,"column":28},"end":{"row":625,"column":37}},"text":"dataStore"},{"action":"insertText","range":{"start":{"row":625,"column":28},"end":{"row":625,"column":34}},"text":"tempTD"},{"action":"removeText","range":{"start":{"row":625,"column":73},"end":{"row":625,"column":83}},"text":"Data.Trial"},{"action":"insertText","range":{"start":{"row":625,"column":73},"end":{"row":625,"column":80}},"text":"TDCache"},{"action":"removeText","range":{"start":{"row":629,"column":57},"end":{"row":629,"column":66}},"text":"dataStore"},{"action":"insertText","range":{"start":{"row":629,"column":57},"end":{"row":629,"column":63}},"text":"tempTD"},{"action":"removeText","range":{"start":{"row":642,"column":0},"end":{"row":642,"column":36}},"text":"                    QRTE.saveData();"},{"action":"removeText","range":{"start":{"row":641,"column":41},"end":{"row":642,"column":0}},"text":"\n"},{"action":"removeText","range":{"start":{"row":645,"column":0},"end":{"row":645,"column":32}},"text":"                    return false"},{"action":"removeText","range":{"start":{"row":644,"column":61},"end":{"row":644,"column":62}},"text":";"},{"action":"removeText","range":{"start":{"row":644,"column":61},"end":{"row":645,"column":0}},"text":"\n"},{"action":"removeText","range":{"start":{"row":1629,"column":0},"end":{"row":1629,"column":8}},"text":"        "},{"action":"removeLines","range":{"start":{"row":1444,"column":0},"end":{"row":1629,"column":0}},"nl":"\n","lines":["        ","        ","        ","        //****** DATA API ********/","        /**","         * TDCache contains the Trial-Level Data in an Object. DO NOT directly manipulate this Object. It might cause inconsistencies in the data file and cause unexpected once parsed.","         * Use QRTE.setTrialData and QRTE.getTrialData instead.","         * ","         * @property TDCache","         * @private","         * @type Object","         */","        TDCache: {},","","        /**","         * ColumnCache contains all the mappings from QID to Columns","         * @property columnCache","         * @private","         * @type Object","         */","        columnCache: {},","","        /**","         * BDCache contains the BlockLevel Data in an Object. Directly manipulating this Object might cause inconsistencies","         * @property BDCache","         * @private","         * @type Object","         */","        BDCache: {},","","        /**","         * SDCache is a cache for speeding up retrieval of Survey level Data,","         * All Survey data is saved to both Embedded Data and Survey Data","         * @private","         * @property SDCache","         * @type Object","         */","        SDCache: {},","","        /**","         * idCache is a cache for quickly retrieving the Qualtrics QID to QRTLib Id mappings.","         * Saved in the idData embedded data field after every trial.","         * @private","         * @property idCache","         * @type Object","         */","        idCache: {},","        ","        /**","         * Setter function for Trial-Level Data. ","         * @method setTrialData","         * @param key {String} Key","         * @param value {Value} Value","         */","        setTrialData: function(key, value) {","            this.TDCache[key] = value;","            this.Data.Trial[key] = value;","            if (this.BDCache.QRTLib_trialColumns[key] === undefined) {","                this.Data.Block.columns[key = '';","                this.BDCache.QRTLib_trialColumns[key] = '';","                this.newlyAddedColumns.push(key);","            }","        },","","        /**","         * Gets the value of Trial-Level Data field 'key","         * @method getTrialData","         * @param key {String} Key","         */","        getTrialData: function(key) {","            return this.TDCache[key];","        },","","        /**","         * Setter function for Block-Level Data. ","         * @method setBlockData","         * @param key {String} Key","         * @param value {Value} Value","         */","        setBlockData: function(key, value) {","            this.Data.Block[key] = value;","            this.BDCache[key] = value;","        },","","","        /**","         * Gets the value of Block-Level Data field 'key ","         * @method getBlockData","         * @param key {String} Key","         */","        getBlockData: function(key) {","            return this.BDCache[key];","        },","","","","","        /**","         * Stringify the Block Data and store it in the Embedded Data Field. This preserves the values stored on Block Level for use in later trials","         * @method saveBlockData","         * @param key {String} Key","         */","        saveBlockData: function() {","            Qualtrics.SurveyEngine.setEmbeddedData(QRTE.blockDataField, Object.toJSON(QRTE.BDCache));","        },","","","","        /**","         * Setter function for Survey-Level Data (Embedded Data). ","         * @method setSurveyData","         * @param key {String} Key","         * @param value {Value} Value","         */","        setSurveyData: function(key, value) {","            this.SDCache[key] = value;","            this.Data.Survey[key] = value;","            Qualtrics.SurveyEngine.setEmbeddedData(key, value);","        },","","","","        /**","         * Gets the value of Survey-Level Data (Embedded Data) 'key'","         * @method getSurveyData","         * @param key {String} Key","         */","","        getSurveyData: function(key) {","            if (this.SDCache[key] !== undefined) {","                return this.SDCache[key];","            }","            return Qualtrics.SurveyEngine.getEmbeddedData(key);","        },","        ","        Data: {},","        dataED: '${e://Field/QRTE_dataED}',","        initData: function(blockId) {","","            var dataED, data, survey, block, trial;","        ","            dataED = QRTE.dataED === '' ? '{}' : QRTE.dataED;","        ","            //Parse JSON data","            data = dataED.evalJSON();","        ","            survey = data.Survey;","            block = data.Block;","            trial = data.Trial;","        ","            if (survey === undefined) {","                survey = {","                    current: {}","                };","            }","        ","            if (blockId !== survey.current.id) {","                survey.previous = block;","        ","                block = survey[blockId] = survey.current = {","                    id: blockId,","                    counter: 1,","                    columns: {}","                };","                //Set block init values","            }","        ","            //init trial","            block.previous = trial;","            block.current = trial = {};","            // Set trial init values (based on current known columns?), figure out what they are","        ","        ","            QRTE.Data = {","                Survey: survey,","                Block: block,","                Trial: trial","            };","","        },","        ","        saveData: function() {","            Qualtrics.SurveyEngine.setEmbeddedData('QRTE_dataED',Object.toJSON(QRTE.Data));","        }",""]},{"action":"removeText","range":{"start":{"row":1443,"column":9},"end":{"row":1443,"column":10}},"text":","},{"action":"removeText","range":{"start":{"row":1443,"column":9},"end":{"row":1444,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1568,"column":5},"end":{"row":1569,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":1569,"column":0},"end":{"row":1569,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1569,"column":4},"end":{"row":1570,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":1570,"column":0},"end":{"row":1570,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1570,"column":4},"end":{"row":1570,"column":50}},"text":"#SkinContent > #Buttons,.SkinInner > #Header {"},{"action":"insertText","range":{"start":{"row":1570,"column":50},"end":{"row":1571,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1571,"column":0},"end":{"row":1572,"column":0}},"lines":["    padding: 0 !important;"]},{"action":"insertText","range":{"start":{"row":1572,"column":0},"end":{"row":1572,"column":1}},"text":"}"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1572,"column":0},"end":{"row":1572,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1571,"column":4},"end":{"row":1571,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":1569,"column":0},"end":{"row":1573,"column":0}},"nl":"\n","lines":["    ","    #SkinContent > #Buttons,.SkinInner > #Header {","        padding: 0 !important;","    }"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1569,"column":0},"end":{"row":1569,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":1569,"column":4},"end":{"row":1570,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1570,"column":0},"end":{"row":1573,"column":0}},"lines":["    #SkinContent > #Buttons,.SkinInner > #Header {","        padding: 0 !important;","    }"]}]}]]},"ace":{"folds":[],"scrolltop":21652,"scrollleft":0,"selection":{"start":{"row":1570,"column":39},"end":{"row":1570,"column":39},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1545,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1413553879684,"hash":"fbebcff5f249bb9a03f9c8f03f9c3299a05ab1cc"}